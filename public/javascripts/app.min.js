var app=angular.module("recipeCreator",["ngMaterial","ngRoute"]);app.config(["$routeProvider","$locationProvider","$mdThemingProvider",function(e,r,n){r.html5Mode(!0),n.theme("default").primaryPalette("amber").accentPalette("yellow"),e.when("/",{templateUrl:"/views/recipes.html",controller:"recipeMake"}).when("/dbsg_calc",{templateUrl:"/views/dbsgcalc.html",controller:"dbsgCalc"})}]),app.service("PpgCalc",function(){this.calcPpg=function(e){return 1e3*(1+e/100*.04621)/1e3}}),app.controller("recipeMake",["$scope","$http",function(e,r){function n(n){r({method:"GET",url:"/"+n}).then(function(r){e[n]=r.data})}n("grains"),n("hops"),n("yeasts"),e.recipe={name:"",grains:{totalWeight:function(){var r=0;return e.recipe.grains.added.forEach(function(e,n){e.grainWt>0&&(r+=parseInt(e.grainWt))}),r},totalPPG:function(){var r=0;return e.recipe.grains.added.forEach(function(n,i){r+=Math.round(1e3*(n.PPG-1)*n.grainWt/e.recipe.volume)/1e3}),r},efficiencyPPG:function(){var r=Math.round(e.recipe.grains.totalPPG()*(e.recipe.efficiency/100)*1e3)/1e3+1;return r>1.5&&(r=1.5),r.toString().length>5&&(r=r.toString().slice(0,5)),r},added:[]},efficiency:65,attenuation:70,volume:5,hops:{added:[],ibu:function(){if(e.recipe.hops.added.length>0&&e.recipe.grains.added.length>0){var r=0,n=0,i=1.65*Math.pow(125e-6,e.recipe.og()-1);return e.recipe.hops.added.forEach(function(t){if(n=t.hopWt*(t.Alpha_Acid/100)*7490/e.recipe.volume,"boil"==t.hopType){var a=(1-Math.pow(2.718281828459045,-.04*t.hopTime))/3.8,c=i*a;r+=c*n}else if("whirlpool"==t.hopType){var c=10;r+=c*n}}),Math.round(100*r)/100}return 0}},og:function(){return e.recipe.grains.added.length>0?e.recipe.grains.efficiencyPPG():0},fg:function(){if(e.recipe.grains.added.length>0){var r=Math.round(1e3*(e.recipe.grains.efficiencyPPG()-1)*(e.recipe.attenuation/100))/1e3;return r=e.recipe.og()-r,r.toString().length>5&&(r=r.toString().slice(0,5)),r}return 0},abv:function(){if(e.recipe.grains.added.length>0){var r=e.recipe.og(),n=e.recipe.fg();return Math.round(76.08*(r-n)/(1.775-r)*(n/.794)*100)/100}return 0},srm:function(){if(e.recipe.grains.added.length>0){var r=0,n=e.recipe.grains.added.forEach(function(e,n){r+=e.lovi*e.grainWt});return n=r/e.recipe.volume,Math.round(1.4922*Math.pow(n,.6859)*100)/100}return 0},dp:function(){if(e.recipe.grains.added.length>0){var r=0;return e.recipe.grains.added.forEach(function(e,n){r+=e.dp*e.grainWt}),Math.round(r/e.recipe.grains.totalWeight())}return 0},notes:""},e.addIngredient=function(r,n){e.recipe[r].added.push(e[n]),e.grain={}},e.deleteItem=function(r,n){e.recipe[n].added.splice(r,1)}}]),app.controller("dbsgCalc",["$scope",function(e){console.log("clicked"),console.log(e.dbfg+e.name)}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIiRtZFRoZW1pbmdQcm92aWRlciIsImh0bWw1TW9kZSIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsInNlcnZpY2UiLCJ0aGlzIiwiY2FsY1BwZyIsImRiZmciLCIkc2NvcGUiLCIkaHR0cCIsImdldEl0ZW0iLCJpdGVtIiwibWV0aG9kIiwidXJsIiwidGhlbiIsInJlcyIsImRhdGEiLCJyZWNpcGUiLCJuYW1lIiwiZ3JhaW5zIiwidG90YWxXZWlnaHQiLCJ0b3RhbCIsImFkZGVkIiwiZm9yRWFjaCIsImdyYWluIiwiaW5kZXgiLCJncmFpbld0IiwicGFyc2VJbnQiLCJ0b3RhbFBQRyIsIk1hdGgiLCJyb3VuZCIsIlBQRyIsInZvbHVtZSIsImVmZmljaWVuY3lQUEciLCJlZmZQUEciLCJlZmZpY2llbmN5IiwidG9TdHJpbmciLCJsZW5ndGgiLCJzbGljZSIsImF0dGVudWF0aW9uIiwiaG9wcyIsImlidSIsImFhdSIsImJpZ0ZhY3QiLCJwb3ciLCJvZyIsImhvcCIsImhvcFd0IiwiQWxwaGFfQWNpZCIsImhvcFR5cGUiLCJib2lsVEZhY3QiLCJob3BUaW1lIiwidXRpbCIsImZnIiwieWVhc3RGb29kIiwiYWJ2Iiwic3JtIiwidG90YWxDb2xvciIsIm1jdSIsImxvdmkiLCJkcCIsInRvdGFsZHAiLCJub3RlcyIsImFkZEluZ3JlZGllbnQiLCJpbmdyZWRpZW50IiwidHlwZSIsInB1c2giLCJkZWxldGVJdGVtIiwic3BsaWNlIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxpQkFBQSxhQUFBLFdBQ0FGLEtBQUFHLFFBQUEsaUJBQUEsb0JBQUEscUJBQUEs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QUFBQyxJQUFBLFdBQ0FELFFBQUFDLElBQUE5RCxFQUFBRCxLQUFBQyxFQUFBVSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ3JlY2lwZUNyZWF0b3InLCBbJ25nTWF0ZXJpYWwnLCAnbmdSb3V0ZSddKTtcbiAgYXBwLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJywgJyRtZFRoZW1pbmdQcm92aWRlcicsIGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlciwgJG1kVGhlbWluZ1Byb3ZpZGVyKXtcbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0JylcbiAgICAgIC5wcmltYXJ5UGFsZXR0ZSgnYW1iZXInKVxuICAgICAgLmFjY2VudFBhbGV0dGUoJ3llbGxvdycpO1xuXG4gICAgJHJvdXRlUHJvdmlkZXIud2hlbignLycsIHtcbiAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL3JlY2lwZXMuaHRtbCcsXG4gICAgICBjb250cm9sbGVyOiAncmVjaXBlTWFrZSdcbiAgICB9KS53aGVuKCcvZGJzZ19jYWxjJywge1xuICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvZGJzZ2NhbGMuaHRtbCcsXG4gICAgICBjb250cm9sbGVyOiAnZGJzZ0NhbGMnXG4gICAgfSlcbiAgfV0pO1xuICBhcHAuc2VydmljZSgnUHBnQ2FsYycsIGZ1bmN0aW9uICgpe1xuICAgIHRoaXMuY2FsY1BwZyA9IGZ1bmN0aW9uKGRiZmcpIHtcbiAgICAgIHJldHVybiAoMTAwMCAqICgxICsgKGRiZmcgLyAxMDApICogMC4wNDYyMSkpIC8gMTAwMFxuICAgIH1cbiAgfSk7XG5cbiAgYXBwLmNvbnRyb2xsZXIoJ3JlY2lwZU1ha2UnLCBbJyRzY29wZScsICckaHR0cCcsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHApe1xuICAgIGdldEl0ZW0oJ2dyYWlucycpO1xuICAgIGdldEl0ZW0oJ2hvcHMnKTtcbiAgICBnZXRJdGVtKCd5ZWFzdHMnKTtcblxuICAgICRzY29wZS5yZWNpcGUgPSB7XG4gICAgICBuYW1lOiAnJyxcbiAgICAgIGdyYWluczoge1xuICAgICAgICB0b3RhbFdlaWdodDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHRvdGFsID0gMDtcbiAgICAgICAgICAkc2NvcGUucmVjaXBlLmdyYWlucy5hZGRlZC5mb3JFYWNoKGZ1bmN0aW9uKGdyYWluLCBpbmRleCkge1xuICAgICAgICAgICAgaWYoZ3JhaW4uZ3JhaW5XdCA+IDApe1xuICAgICAgICAgICAgICB0b3RhbCArPSBwYXJzZUludChncmFpbi5ncmFpbld0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIHJldHVybiB0b3RhbDtcbiAgICAgICAgfSxcbiAgICAgICAgdG90YWxQUEc6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgdmFyIHRvdGFsID0gMDtcbiAgICAgICAgICAkc2NvcGUucmVjaXBlLmdyYWlucy5hZGRlZC5mb3JFYWNoKGZ1bmN0aW9uKGdyYWluLCBpbmRleCl7XG4gICAgICAgICAgICB0b3RhbCArPSAoTWF0aC5yb3VuZCgoZ3JhaW4uUFBHIC0gMSkgKiAxMDAwICogZ3JhaW4uZ3JhaW5XdCAvICRzY29wZS5yZWNpcGUudm9sdW1lKSkgLyAxMDAwO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgcmV0dXJuIHRvdGFsO1xuICAgICAgICB9LFxuICAgICAgICBlZmZpY2llbmN5UFBHOiBmdW5jdGlvbigpe1xuICAgICAgICAgIHZhciBlZmZQUEcgPSBNYXRoLnJvdW5kKCRzY29wZS5yZWNpcGUuZ3JhaW5zLnRvdGFsUFBHKCkgKiAoJHNjb3BlLnJlY2lwZS5lZmZpY2llbmN5IC8gMTAwKSAqIDEwMDApIC8gMTAwMCArIDE7XG4gICAgICAgICAgaWYoZWZmUFBHID4gMS41KSB7XG4gICAgICAgICAgICBlZmZQUEcgPSAxLjU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKGVmZlBQRy50b1N0cmluZygpLmxlbmd0aCA+IDUpIHtcbiAgICAgICAgICAgIGVmZlBQRyA9IGVmZlBQRy50b1N0cmluZygpLnNsaWNlKDAsIDUpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIGVmZlBQRztcbiAgICAgICAgfSxcbiAgICAgICAgYWRkZWQ6IFtdXG4gICAgICB9LFxuICAgICAgZWZmaWNpZW5jeTogNjUsXG4gICAgICBhdHRlbnVhdGlvbjogNzAsXG4gICAgICB2b2x1bWU6IDUsXG4gICAgICBob3BzOiB7XG4gICAgICAgIGFkZGVkOiBbXSxcbiAgICAgICAgaWJ1OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZigkc2NvcGUucmVjaXBlLmhvcHMuYWRkZWQubGVuZ3RoID4gMCAmJiAkc2NvcGUucmVjaXBlLmdyYWlucy5hZGRlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgaWJ1ID0gMDtcbiAgICAgICAgICAgIHZhciBhYXUgPSAwO1xuICAgICAgICAgICAgdmFyIGJpZ0ZhY3QgPSAxLjY1ICogTWF0aC5wb3coMC4wMDAxMjUsICgkc2NvcGUucmVjaXBlLm9nKCkgLSAxKSk7XG4gICAgICAgICAgICAkc2NvcGUucmVjaXBlLmhvcHMuYWRkZWQuZm9yRWFjaChmdW5jdGlvbihob3ApIHtcbiAgICAgICAgICAgICAgYWF1ID0gaG9wLmhvcFd0ICogKGhvcC5BbHBoYV9BY2lkIC8gMTAwKSAqIDc0OTAgLyAkc2NvcGUucmVjaXBlLnZvbHVtZTtcbiAgICAgICAgICAgICAgaWYoaG9wLmhvcFR5cGUgPT0gJ2JvaWwnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJvaWxURmFjdCA9ICgoMSAtIE1hdGgucG93KDIuNzE4MjgxODI4NDU5MDQ1MjM1MzYsICgtLjA0ICogaG9wLmhvcFRpbWUpKSkgLyAzLjgpO1xuICAgICAgICAgICAgICAgIHZhciB1dGlsID0gYmlnRmFjdCAqIGJvaWxURmFjdDtcbiAgICAgICAgICAgICAgICBpYnUgKz0gdXRpbCAqIGFhdTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmKGhvcC5ob3BUeXBlID09ICd3aGlybHBvb2wnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHV0aWwgPSAxMDtcbiAgICAgICAgICAgICAgICBpYnUgKz0gdXRpbCAqIGFhdVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKGlidSAqIDEwMCkgLyAxMDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb2c6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZigkc2NvcGUucmVjaXBlLmdyYWlucy5hZGRlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmV0dXJuICRzY29wZS5yZWNpcGUuZ3JhaW5zLmVmZmljaWVuY3lQUEcoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGZnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYoJHNjb3BlLnJlY2lwZS5ncmFpbnMuYWRkZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZhciB5ZWFzdEZvb2QgPSBNYXRoLnJvdW5kKCgoJHNjb3BlLnJlY2lwZS5ncmFpbnMuZWZmaWNpZW5jeVBQRygpIC0gMSkgKiAxMDAwKSAqICgkc2NvcGUucmVjaXBlLmF0dGVudWF0aW9uIC8gMTAwKSkgLyAxMDAwO1xuICAgICAgICAgIHllYXN0Rm9vZCA9ICRzY29wZS5yZWNpcGUub2coKSAtIHllYXN0Rm9vZDtcbiAgICAgICAgICBpZih5ZWFzdEZvb2QudG9TdHJpbmcoKS5sZW5ndGggPiA1KSB7XG4gICAgICAgICAgICB5ZWFzdEZvb2QgPSB5ZWFzdEZvb2QudG9TdHJpbmcoKS5zbGljZSgwLCA1KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHllYXN0Rm9vZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIDBcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFidjogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmKCRzY29wZS5yZWNpcGUuZ3JhaW5zLmFkZGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB2YXIgb2cgPSAkc2NvcGUucmVjaXBlLm9nKCksXG4gICAgICAgICAgICAgIGZnID0gJHNjb3BlLnJlY2lwZS5mZygpO1xuICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKCg3Ni4wOCAqIChvZy1mZykgLyAoMS43NzUgLSBvZykpICogKGZnIC8gMC43OTQpICogMTAwKSAvIDEwMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gMFxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc3JtOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYoJHNjb3BlLnJlY2lwZS5ncmFpbnMuYWRkZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZhciB0b3RhbENvbG9yID0gMDtcbiAgICAgICAgICB2YXIgbWN1ID0gJHNjb3BlLnJlY2lwZS5ncmFpbnMuYWRkZWQuZm9yRWFjaChmdW5jdGlvbihncmFpbiwgaW5kZXgpIHtcbiAgICAgICAgICAgIHRvdGFsQ29sb3IgKz0gKGdyYWluLmxvdmkgKiBncmFpbi5ncmFpbld0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBtY3UgPSB0b3RhbENvbG9yIC8gJHNjb3BlLnJlY2lwZS52b2x1bWU7XG4gICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoKDEuNDkyMiAqIChNYXRoLnBvdyhtY3UsIDAuNjg1OSkpKSAqIDEwMCkgLyAxMDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkcDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmKCRzY29wZS5yZWNpcGUuZ3JhaW5zLmFkZGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB2YXIgdG90YWxkcCA9IDA7XG4gICAgICAgICAgJHNjb3BlLnJlY2lwZS5ncmFpbnMuYWRkZWQuZm9yRWFjaChmdW5jdGlvbihncmFpbiwgaW5kZXgpIHtcbiAgICAgICAgICAgIHRvdGFsZHAgKz0gZ3JhaW4uZHAgKiBncmFpbi5ncmFpbld0O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHRvdGFsZHAgLyAkc2NvcGUucmVjaXBlLmdyYWlucy50b3RhbFdlaWdodCgpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG5vdGVzOiAnJ1xuICAgIH07XG4gICAgLy9nZW5lcmljIGZ1bmN0aW9uIHRvIGFkZCBhbiBpdGVtIHRvIHRoZSBhcnJheSBmb3IgdGhvc2UgaW5ncmVkaWVudHNcbiAgICAkc2NvcGUuYWRkSW5ncmVkaWVudCA9IGZ1bmN0aW9uKGluZ3JlZGllbnQsIHR5cGUpe1xuICAgICAgJHNjb3BlLnJlY2lwZVtpbmdyZWRpZW50XS5hZGRlZC5wdXNoKCRzY29wZVt0eXBlXSk7XG4gICAgICAkc2NvcGUuZ3JhaW4gPSB7fTtcbiAgICB9XG4gICAgLy9yZW1vdmUgYnV0dG9uIGZ1bmN0aW9uIC0gcmVtb3ZlcyBvbmUgaXRlbSBmcm9tIHRoZSBhcnJheVxuICAgICRzY29wZS5kZWxldGVJdGVtID0gZnVuY3Rpb24oaW5kZXgsIHR5cGUpIHtcbiAgICAgICRzY29wZS5yZWNpcGVbdHlwZV0uYWRkZWQuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gICAgLy9nZW5lcmljIGZ1bmN0aW9uIHRvIGNhbGwgdGhlIHNlcnZlciBmb3IgYSBzcGVjaWZpYyBpbmdyZWRpZW50XG4gICAgZnVuY3Rpb24gZ2V0SXRlbShpdGVtKXtcbiAgICAgICRodHRwKHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgdXJsOiAnLycgKyBpdGVtXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAkc2NvcGVbaXRlbV0gPSByZXMuZGF0YTtcbiAgICAgIH0pXG4gICAgfTtcbiAgfV0pO1xuXG4gIC8vZXh0cmEgZm9yIGEgY2FsY3VsYXRvciBjb250cm9sbGVyXG4gIGFwcC5jb250cm9sbGVyKCdkYnNnQ2FsYycsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKXtcbiAgICBjb25zb2xlLmxvZygnY2xpY2tlZCcpO1xuICAgIGNvbnNvbGUubG9nKCRzY29wZS5kYmZnICsgJHNjb3BlLm5hbWUpO1xuICAgIC8vICRzY29wZS5hZGRncmFpbiA9IGZ1bmN0aW9uKCl7XG4gICAgLy8gICBpZighJHNjb3BlLmdyYWlucykge1xuICAgIC8vICAgICAkc2NvcGUuZ3JhaW5zID0gW107XG4gICAgLy8gICB9XG4gICAgLy8gICAkc2NvcGUuZ3JhaW5zLnB1c2goJHNjb3BlLmdyYWluKTtcbiAgICAvLyAgICRzY29wZS5ncmFpbiA9IHt9O1xuICAgIC8vIH1cbiAgfV0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9